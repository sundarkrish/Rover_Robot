/*--------------------------------------------------------------------------------------------
*motor.h
*Parker McDonnell
*ECEN 5613 -- Spring 2020 - Prof. McClure
*University of Colorado Boulder
*
*---------------------------------------------------------------------------------------------
*Code Reuse:
*
**------------------------------------------------------------------------------------------*/

#ifndef _MOTOR_H_
#define _MOTOR_H_

//-------------------------------------------------------------------------------------------
//                                       INCLUDES
//-------------------------------------------------------------------------------------------

//libraries
#include "msp.h"
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <stdbool.h>

//-------------------------------------------------------------------------------------------
//                                        DEFINES
//-------------------------------------------------------------------------------------------

#define AIN1            0x0080              //P2.7
#define AIN2            0x0040              //P2.6
#define BIN1            0x0010              //P2.4
#define BIN2            0x0040              //P5.6
#define SLEEP_N         0x0002              //P5.1
#define FAULT_N         0x0020              //P3.5

#define _MOTOR_DEBUG_

//-------------------------------------------------------------------------------------------
//                                  EXTERNAL VARIABLES
//-------------------------------------------------------------------------------------------

typedef enum{
    forward,
    reverse,
    left,
    right,
    stopped
}direction_t;

typedef struct{
    uint8_t speed;
    uint8_t time;
    //drv8833_t driver;
    direction_t direction;
    bool running;
    bool sleep;
    bool fault;
}status_t;

//-------------------------------------------------------------------------------------------
//                              PUBLIC FUNCTION PROTOTYPES
//-------------------------------------------------------------------------------------------

/////////////////////////////////////////////////////////////////////////////////////////////
//void function(void)
/////////////////////////////////////////////////////////////////////////////////////////////
//@brief:
//
//
//@param:
//@return:
//@outcome:
/////////////////////////////////////////////////////////////////////////////////////////////

void motor_init(void);

/////////////////////////////////////////////////////////////////////////////////////////////
//void function(void)
/////////////////////////////////////////////////////////////////////////////////////////////
//@brief:
//
//
//@param:
//@return:
//@outcome:
/////////////////////////////////////////////////////////////////////////////////////////////

bool motor_fault(void);

/////////////////////////////////////////////////////////////////////////////////////////////
//void function(void)
/////////////////////////////////////////////////////////////////////////////////////////////
//@brief:
//
//
//@param:
//@return:
//@outcome:
/////////////////////////////////////////////////////////////////////////////////////////////

void motor_stop(void);

/////////////////////////////////////////////////////////////////////////////////////////////
//void function(void)
/////////////////////////////////////////////////////////////////////////////////////////////
//@brief:
//
//
//@param:
//@return:
//@outcome:
/////////////////////////////////////////////////////////////////////////////////////////////

bool motor_go(uint8_t direction, uint8_t speed, uint8_t time_sec);

#endif  //_MOTOR_H_
